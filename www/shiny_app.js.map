{"version":3,"file":"shiny_app.js","mappings":"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","sources":["webpack://geom90007-a3-naarmwings/./src/js/user_agent.js","webpack://geom90007-a3-naarmwings/./src/js/events.js","webpack://geom90007-a3-naarmwings/./src/js/search.js","webpack://geom90007-a3-naarmwings/./src/js/buttons.js","webpack://geom90007-a3-naarmwings/./src/js/ui.js","webpack://geom90007-a3-naarmwings/./src/js/intro.js","webpack://geom90007-a3-naarmwings/./src/js/_build.js"],"sourcesContent":["/**\n  Checks the user agent and loads a helpful message\n */\nconst check_user_agent = () => {\n  // pop up message for WebQTEngine browsers (built in)\n  navigator.userAgent.includes(\"QtWebEngine\") &&\n    window.alert(\"For best effect, please use an external browser.\");\n};\n\nexport {\n  check_user_agent\n};","/**\n  Handling of reactive event messages from Shiny\n */\n\n/**\n  Opens a tabPanel while adding effects\n  @param {DOMElement} panel a DOM element representing a Shiny tabPanel\n  @param {boolean} [dimmer=true] whether to toggle dimmer panel\n  @return {boolean} True\n */\nconst activate_panel = (panel, apply_dimmer = true) => {\n  if (!panel) {\n    return false;\n  }\n\n  const dimmer = document.querySelector(\"[data-value='Dimmer'].tab-pane\");\n  panel.classList.add(\"active\");\n\n  if (apply_dimmer && dimmer) {\n    dimmer.classList.add(\"dim\");\n    dimmer.addEventListener(\n      \"click\",\n      () => deactivate_panel(panel),\n      { once: true }\n    );\n  }\n\n  return true;\n}\n\n/**\n  Closes a tabPanel while adding effects\n  @param {DOMElement} panel a DOM element representing a Shiny tabPanel\n  @param {boolean} [dimmer=true] whether to toggle dimmer panel\n  @return {boolean} True\n */\nconst deactivate_panel = (panel, apply_dimmer = true) => {\n  if (!panel) {\n    return false;\n  }\n\n  const dimmer = document.querySelector(\"[data-value='Dimmer'].tab-pane\");\n  panel.classList.remove(\"active\");\n\n  if (apply_dimmer && dimmer) {\n    dimmer.classList.remove(\"dim\");\n    dimmer.replaceWith(dimmer.cloneNode(true));\n  }\n\n  return true;\n}\n\n/**\n  Loads and binds event handlers for Shiny custom messages\n  @return void\n */\nconst load_event_handlers = () => {\n  // Insert handlers here\n}\n\nexport {\n  activate_panel,\n  deactivate_panel,\n  load_event_handlers\n};\n","/**\n  Handle search functions\n */\n\nconst SEARCH_INPUT_ID = \"search-input\";\nconst get_search_input = () => document.getElementById(SEARCH_INPUT_ID);\n\n/**\n  Query the openstreetmaps nominatim API with the query term\n  bounded by Melbourne coordinates\n  @param {string} query The search query.\n  @return {array} An array of objects returned from the API.\n  @note Response will return empty array if non-found or error.\n  @see https://nominatim.org/release-docs/develop/api/Search/\n */\nconst search_osm = async (query) => {\n  const trimmed_query = (query || \"\").trim();\n  if (!trimmed_query) {\n    return [];\n  }\n\n  // The URL endpoint\n  const url = new URL(\"https://nominatim.openstreetmap.org/search\");\n  \n  // Append params to the url\n  const params = {\n    \"format\": \"json\",\n    \"countrycodes\": \"au\",\n    \"viewbox\": \"144.93366,-37.79264,144.97670,-37.82391\",\n    \"bounded\": \"1\",\n    \"q\": trimmed_query\n  }\n  \n  for (let param in params) {\n    url.searchParams.append(param, params[param])\n  }\n\n  on_search_go();\n\n  try {\n    const result = await fetch(url);\n    if (result.status !== 200) {\n      throw new Error(`Bad Server Response (${result.status})`);\n    }\n    return await result.json();\n  } catch (error) {\n    console.error(\"Error querying OpenStreetMap:\", error);\n    return [];\n  } finally {\n    on_search_done();\n  }\n}\n\n/**\n  Renders the search results in the SearchResults panel\n  @param {array} json the search results as an array of objects\n  @return {void}\n */\nconst render_search_results = (json) => {\n  const res_panel = document.querySelector(\"[data-value='SearchResults'].tab-pane\");\n  if (!res_panel) {\n    return;\n  }\n\n  res_panel.innerHTML = \"\";\n  const results = Array.isArray(json) ? json : [];\n  const res_elements = results.map((result) => {\n    // Wrapper\n    const wrapper = document.createElement(\"div\");\n    wrapper.classList.add(\"result-wrapper\");\n    \n    // Wrangle the display_name\n    const display_names = osm_display_name(result);\n    \n    // Bind click event to wrapper\n    wrapper.addEventListener(\"click\", () => {\n      const input = get_search_input();\n      if (!input) {\n        return;\n      }\n\n      const { lat, lon } = result || {};\n      if (lat == null || lon == null) {\n        search_res_alert(\"Selected result is missing location data.\", true);\n        return;\n      }\n      \n      /** @fires set:loc */\n      input.dispatchEvent(\n        new CustomEvent(\"set:loc\", {\"detail\": result})\n      );\n      \n      /** @fires close:panel */\n      const res_panel_click = document.querySelector(\"[data-value='SearchResults'].tab-pane\");\n      res_panel_click && res_panel_click.dispatchEvent(\n        new CustomEvent(\"close:panel\", {\"detail\": result})\n      );\n      \n      // Sets the search input box to display the selected name\n      input.value = display_names[0] || \"Unknown name\";\n      \n      // Close the panel\n      close_search_results();\n      \n      // Clean up any other indicators\n      remove_gps_indicator();\n    });\n    \n    // Create internal elements\n    const name = document.createElement(\"div\");\n    name.classList.add(\"result-name\");\n    name.innerHTML = display_names[0] || \"Unknown name\";\n    \n    const loc = document.createElement(\"div\");\n    loc.classList.add(\"result-loc\");\n    loc.innerHTML = display_names[1] && display_names.slice(1).join(\" \")\n      || \"Unknown location\";\n    \n    wrapper.appendChild(name);\n    wrapper.appendChild(loc);\n    \n    return wrapper;\n  })\n  \n  // Check that there are elements in res_elements, if not, add a message\n  if (res_elements.length < 1) {\n    search_res_alert(\"No results found, please try again.\");\n  }\n  \n  // Add elements to the res_panel\n  res_panel.append(... res_elements);\n  \n  // Open the panel after results have been rendered\n  open_search_results();\n}\n\n/**\n  Renders a contextual message inside the search results panel\n  @param {string} message the alert message\n  @param {boolean} [open_panel=false] whether or not to trigger the panel opening\n  @returns {void}\n */\nconst search_res_alert = (message, open_panel = false) => {\n  const res_panel = document.querySelector(\"[data-value='SearchResults'].tab-pane\");\n  if (!res_panel) {\n    return;\n  }\n\n  // Reset panel contents and add the message\n  res_panel.innerHTML = \"\";\n  const msg = document.createElement(\"div\");\n  msg.classList.add(\"result-none\");\n  msg.innerHTML = message;\n  res_panel.append(msg);\n  \n  // Open the panel if required\n  open_panel && open_search_results();\n}\n\n/**\n  Wrangle the display_name from Openstreetmap search results\n  @param {object} obj\n  @returns {array} of string\n */\nconst osm_display_name = (obj) => {\n  return obj.display_name && obj.display_name.split(\",\") || [];\n}\n\n/**\n  Aligns the position of the SearchResults panel and opens it\n  @returns {void}\n */\nconst open_search_results = () => {\n  const res_panel = document.querySelector(\"[data-value='SearchResults'].tab-pane\");\n  const search_input = get_search_input();\n  if (!res_panel || !search_input) {\n    return;\n  }\n\n  const input_wrapper = search_input.closest(\".wrapper\");\n  if (!input_wrapper) {\n    return;\n  }\n\n  const {\n    bottom:y, width\n  } = input_wrapper.getBoundingClientRect();\n  \n  res_panel.style.top = `${y}px`;\n  res_panel.style.width = `${width}px`;\n  res_panel.classList.add(\"active\");\n}\n\n/**\n  Closes the SearchResults panel\n */\nconst close_search_results = () => {\n  const res_panel = document.querySelector(\"[data-value='SearchResults'].tab-pane\");\n  res_panel && res_panel.classList.remove(\"active\");\n}\n\n/**\n  On click event handler for the search box button\n */\nconst search_panel_go = async () => {\n  // Get the search query from the search input box\n  const input = get_search_input();\n  if (!input) {\n    return;\n  }\n\n  const query = input.value || \"\";\n  const trimmed_query = query.trim();\n  if (!trimmed_query) {\n    search_res_alert(\"Please enter a destination.\", true);\n    return;\n  }\n  \n  // Query the API\n  const results = await search_osm(trimmed_query);\n  \n  // Render the search results\n  render_search_results(results);\n}\n\n/**\n  Task runner for when a search is initiated\n  @returns {void}\n  @fires search:busy\n */\nconst on_search_go = () => {\n  // Apply styling changes\n  const panel = document.querySelector(\"[data-value='Search'].tab-pane\");\n  panel && panel.classList.add(\"busy\");\n  \n  // Dispatch event\n  const input = get_search_input();\n  input && input.dispatchEvent(\n    new CustomEvent(\"search:busy\")\n  );\n}\n\n/**\n  Task runner for when a search has been completed\n  @returns {void}\n  @fires search:done\n */\nconst on_search_done = () => {\n  // Apply styling changes\n  const panel = document.querySelector(\"[data-value='Search'].tab-pane\");\n  panel && panel.classList.remove(\"busy\");\n  \n  // Dispatch event\n  const input = get_search_input();\n  input && input.dispatchEvent(\n    new CustomEvent(\"search:done\")\n  );\n}\n\n/**\n  Uses the user's geolocation as the map location\n */\nconst use_geolocation = () => {\n  const on_success = (location) => {\n    //location.coords.[latitude, longitude]\n    const {coords: {\n      latitude:lat, longitude:lon\n    }} = location;\n    const input = document.getElementById(\"search-input\");\n      \n    /** @fires set:loc */\n    input.dispatchEvent(\n      new CustomEvent(\"set:loc\", {\"detail\": {lat, lon}})\n    );\n    \n    search_res_alert(\"Current GPS location set.\", true);\n    set_gps_indicator();\n  }\n  \n  const on_failure = (reason) => {\n    //reason.message\n    let message = \"Unable to access current location.\";\n    if (reason) {\n      switch (reason.code) {\n        case reason.PERMISSION_DENIED:\n          message = \"Location permission was denied.\";\n        break;\n        case reason.POSITION_UNAVAILABLE:\n          message = \"Location information is unavailable.\";\n        break;\n        case reason.TIMEOUT:\n          message = \"Location request timed out. Please try again.\";\n        break;\n        default:\n          message = reason.message || message;\n      }\n    }\n    search_res_alert(message, true);\n  }\n  \n  // Query the navigator geolocation service\n  navigator.geolocation &&\n  navigator.geolocation.getCurrentPosition(on_success, on_failure);\n}\n\n/**\n  Adds styling to the GPS icon\n  @returns {void}\n */\nconst set_gps_indicator = () => {\n  const icon = document.getElementById(\"button-gps\");\n  icon.classList.add(\"active\");\n}\n\n/**\n  Removes styling to the GPS icon\n  @returns {void}\n */\nconst remove_gps_indicator = () => {\n  const icon = document.getElementById(\"button-gps\");\n  icon.classList.remove(\"active\");\n}\n\n/**\n  Bind tasks related to search events\n  @returns {void}\n  @listens search:busy\n  @listens search:done\n  @listens set:loc\n */\nconst bind_search_events = () => {\n  const res_panel = document.querySelector(\"[data-value='SearchResults'].tab-pane\");\n  const input = get_search_input();\n  if (!input) {\n    return;\n  }\n\n  // On search go\n  input.addEventListener(\"search:busy\", () => {});\n  \n  // On search done\n  input.addEventListener(\"search:done\", () => {});\n  \n  // On results selection\n  input.addEventListener(\"set:loc\", (event) => {\n    const { detail: data } = event || {};\n    if (!data || data.lat == null || data.lon == null) {\n      search_res_alert(\"Selected result is missing location data.\", true);\n      return;\n    }\n    if (typeof Shiny !== \"undefined\" && Shiny.setInputValue) {\n      Shiny.setInputValue(\"js_set_loc\", data);\n    }\n  })\n}\n\nexport {\n  search_osm,\n  search_panel_go,\n  on_search_go,\n  on_search_done,\n  bind_search_events,\n  open_search_results,\n  close_search_results,\n  use_geolocation\n}\n","/**\n  Handling of button clicks in JS\n */\nimport { activate_panel, deactivate_panel } from \"./events.js\"\nimport { search_panel_go, close_search_results, use_geolocation } from \"./search.js\";\n\n/**\n  Shows and hides the Filters panel\n  @return void\n */\nconst filters_show_hide = () => {\n  const panel = document.querySelector(\"[data-value='Filters'].tab-pane\");\n  if (!panel) {\n    return;\n  }\n\n  panel.classList.contains(\"active\")\n    ? deactivate_panel(panel)\n    : activate_panel(panel);\n}\n\n/**\n  Binds actions to custom buttons\n  @return void\n */\nconst bind_button_actions = () => {\n  // Filters panel toggle\n  const filters_toggle = document.getElementById(\"filters-show-hide\");\n  filters_toggle && filters_toggle.addEventListener(\n    \"click\",\n    filters_show_hide\n  );\n  \n  // Search panel go button\n  const search_button = document.getElementById(\"button-search\");\n  search_button && search_button.addEventListener(\n    \"click\",\n    search_panel_go\n  );\n  \n  // Search panel GPS button\n  const gps_button = document.getElementById(\"button-gps\");\n  gps_button && gps_button.addEventListener(\n    \"click\",\n    use_geolocation\n  );\n  \n  // Keypress events at the search input\n  const search_input = document.getElementById(\"search-input\");\n  search_input && search_input.addEventListener(\n    \"keydown\",\n    (event) => {\n      switch (event.key) {\n        case \"Enter\":\n          event.preventDefault();\n          event.stopPropagation();\n          search_panel_go();\n          break;\n        case \"Escape\":\n          event.preventDefault();\n          event.stopPropagation();\n          event.target.blur();\n          close_search_results();\n          break;\n        default:\n      }\n    }\n  );\n  \n  // Global click events\n  document.addEventListener(\"click\", (event) => {\n    // Close the SearchResults panel when clicking outside\n    const res_panel = document.querySelector(\"[data-value='SearchResults'].tab-pane\");\n    const search_wrapper = document.querySelector(\".search-bar .wrapper\");\n\n    // Only close if clicking outside both panel and search box\n    if (res_panel && search_wrapper &&\n        !res_panel.contains(event.target) &&\n        !search_wrapper.contains(event.target)) {\n      close_search_results();\n    }\n  });\n}\n\nexport {\n  bind_button_actions\n};\n","/**\n  UI related scripts - Adapted for Bird Visualization\n */\n\n\n/**\n  Updates labels on the Radius slider to be more context friendly\n  Only formats labels for the radius slider (distance in km/m)\n  Leaves year range slider labels as plain years\n  @return {void}\n */\nconst slider_context_labels = () => {\n  // Find the radius slider specifically by its parent container\n  const radiusSlider = document.querySelector('#filter_radius');\n  if (!radiusSlider) return;\n\n  // Only format labels within the radius slider\n  const radiusContainer = radiusSlider.closest('.shiny-input-container');\n  if (!radiusContainer) return;\n\n  const labels = radiusContainer.getElementsByClassName(\"irs-grid-text\");\n  for (const label of labels) {\n    try {\n      const value = parseFloat(label.innerHTML);\n      // Only format if it looks like a distance value (not a year)\n      if (value > 0 && value <= 100) {\n        (value < 1) && (label.innerHTML = `${parseInt(value * 1000)} m`);\n        (value >= 1) && (label.innerHTML = `${parseInt(value)} km`);\n      }\n    } catch (error) {\n      continue;\n    }\n  }\n}\n\nexport {\n  slider_context_labels\n}\n","/**\n  Scripts handling the behaviour for Intro page\n */\n\nconst introPane = () => document.querySelector(\"[data-value='Intro'].tab-pane\");\n\nconst updateIntroPage = (pane, desiredPage) => {\n  if (!pane) return;\n\n  const total =\n    parseInt(pane.dataset.pageCount || \"0\", 10) ||\n    pane.getElementsByClassName(\"page\").length ||\n    0;\n\n  if (total < 1) return;\n\n  const nextPage = Math.min(Math.max(desiredPage, 1), total);\n\n  for (let i = 1; i <= total; i += 1) {\n    pane.classList.remove(`page-${i}`);\n  }\n\n  pane.classList.add(`page-${nextPage}`);\n  pane.dataset.currentPage = String(nextPage);\n  pane.dataset.pageCount = String(total);\n};\n\nconst on_intro_btn_click = (event) => {\n  const target = event.currentTarget || event.target;\n  const directionAttr = target && target.getAttribute(\"direction\");\n  const pane = introPane();\n\n  if (!directionAttr || !pane) return;\n\n  const current = parseInt(pane.dataset.currentPage || \"1\", 10) || 1;\n  const total =\n    parseInt(pane.dataset.pageCount || \"0\", 10) ||\n    pane.getElementsByClassName(\"page\").length ||\n    0;\n\n  if (directionAttr === \"left\") {\n    updateIntroPage(pane, current - 1);\n  } else if (directionAttr === \"right\") {\n    if (current < total) {\n      updateIntroPage(pane, current + 1);\n    } else {\n      pane.classList.remove(\"active\");\n    }\n  }\n};\n\n/**\n  Binds click events to buttons\n  @returns {void}\n */\nconst bind_intro_actions = () => {\n  const pane = introPane();\n  if (!pane) return;\n\n  const pageCount = pane.getElementsByClassName(\"page\").length || 0;\n  pane.dataset.pageCount = String(pageCount);\n  pane.dataset.currentPage = \"1\";\n  updateIntroPage(pane, 1);\n\n  const btn_left = document.getElementById(\"intro-left\");\n  const btn_right = document.getElementById(\"intro-right\");\n  \n  btn_left && btn_left.addEventListener(\"click\", on_intro_btn_click);\n  btn_right && btn_right.addEventListener(\"click\", on_intro_btn_click);\n};\n\n/**\n  Show the intro panel on first run\n  @return {void}\n */\nconst on_first_run = () => {\n  const pane = introPane();\n  if (!pane) return;\n  pane.classList.add(\"active\");\n  updateIntroPage(pane, 1);\n};\n\nexport {\n  bind_intro_actions,\n  on_first_run\n}\n","/**\n  Scripts used in the Shiny app - Adapted for Bird Visualization\n */\n\nimport { check_user_agent } from \"./user_agent.js\";\nimport { load_event_handlers } from \"./events.js\";\nimport { bind_button_actions } from \"./buttons\";\nimport { slider_context_labels } from \"./ui.js\";\nimport { search_osm, bind_search_events } from \"./search.js\";\nimport { bind_intro_actions, on_first_run } from \"./intro.js\";\n\n(($) => {\n\n  load_event_handlers();\n\n  window.onload = () => {\n    check_user_agent();\n    window.search = search_osm\n  }\n\n  // When shiny has loaded\n  $(document).on(\"shiny:sessioninitialized\", (event) => {\n    on_first_run();\n    bind_button_actions();\n    bind_intro_actions();\n    bind_search_events();\n    slider_context_labels();\n  })\n\n})($)"],"names":["deactivate_panel","panel","apply_dimmer","arguments","length","undefined","dimmer","document","querySelector","classList","remove","replaceWith","cloneNode","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","value","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","apply","_next","_throw","get_search_input","getElementById","search_osm","_ref","_callee","query","trimmed_query","url","params","param","result","_t","_context","trim","URL","searchParams","append","on_search_go","fetch","status","Error","concat","json","console","error","on_search_done","_x","render_search_results","res_panel","innerHTML","res_elements","Array","isArray","map","wrapper","createElement","add","display_names","osm_display_name","addEventListener","input","_ref2","lat","lon","dispatchEvent","CustomEvent","res_panel_click","close_search_results","remove_gps_indicator","search_res_alert","name","loc","slice","join","appendChild","open_search_results","message","open_panel","msg","obj","display_name","split","search_input","input_wrapper","closest","_input_wrapper$getBou","getBoundingClientRect","bottom","width","style","top","search_panel_go","_ref3","_callee2","results","_context2","use_geolocation","navigator","geolocation","getCurrentPosition","location","_location$coords","coords","latitude","longitude","set_gps_indicator","reason","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","filters_show_hide","contains","once","activate_panel","introPane","updateIntroPage","pane","desiredPage","total","parseInt","dataset","pageCount","getElementsByClassName","nextPage","Math","min","max","currentPage","String","on_intro_btn_click","event","target","currentTarget","directionAttr","getAttribute","current","$","window","onload","userAgent","includes","alert","search","on","filters_toggle","search_button","gps_button","key","preventDefault","stopPropagation","blur","search_wrapper","bind_button_actions","btn_left","btn_right","bind_intro_actions","data","detail","Shiny","setInputValue","bind_search_events","radiusSlider","radiusContainer","_step","_iterator","_createForOfIteratorHelper","s","label","parseFloat","err","slider_context_labels"],"sourceRoot":""}